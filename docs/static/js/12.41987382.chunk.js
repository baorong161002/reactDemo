(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{455:function(e,t,a){"use strict";a.d(t,"a",function(){return h});var n=a(19),l=a(20),r=a(22),s=a(18),i=a(21),o=a(1),c=a.n(o),u=a(32),m={POST:1,GET:2},h=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(r.a)(this,Object(s.a)(t).call(this,e))).state={loading:!1},a.reqConfig={type:m.GET,url:"",reqParams:{}},a.source=null,a.setSource=function(e){a.source=e},a.setUrl=function(e){a.reqConfig.url=e},a.setOperate=function(e){a.reqConfig.type=e},a.setPostOperate=function(){a.setOperate(m.POST)},e.url&&a.setUrl(e.url),a}return Object(i.a)(t,e),Object(l.a)(t,[{key:"componentWillUnmount",value:function(){this.cancelRequest()}},{key:"cancelRequest",value:function(){if(this.source&&this.state.loading){console.log("\u7ec4\u4ef6\u5378\u8f7d,\u53d6\u6d88\u8bf7\u6c42"),this.source.cancel("\u7ec4\u4ef6\u5378\u8f7d,\u53d6\u6d88\u8bf7\u6c42")}}},{key:"requestDataExtend",value:function(e,t,a){var n=this;if(!0!==this.checkShowLoad()){this.showLoadStart();var l={};t&&Object.assign(l,t);var r=u.a.getUrl;a===m.POST&&(r=u.a.postUrl),Object.assign(this.reqConfig,{type:a,url:e,reqParams:l}),r(e,l,this.setSource).then(function(e){console.log(e.data),n.showLoadEnd(),n.processResponseData(e.data)},function(e){n.showLoadEnd(),n.processResponseError(e)})}}},{key:"requestRefresh",value:function(){this.requestDataExtend(this.reqConfig.url,this.reqConfig.reqParams,this.reqConfig.type)}},{key:"requestDataExtendPost",value:function(e,t){this.requestDataExtend(e,t,m.POST)}},{key:"requestDataExtendGet",value:function(e,t){this.requestDataExtend(e,t,m.GET)}},{key:"requestData",value:function(e){this.requestDataExtend(this.reqConfig.url,e,this.reqConfig.type)}},{key:"checkShowLoad",value:function(){return!0===this.state.loading}},{key:"showLoadStart",value:function(){this.setState({loading:!0})}},{key:"showLoadEnd",value:function(){this.setState({loading:!1})}},{key:"processResponseData",value:function(e){console.log("processResponseData:",e)}},{key:"processResponseError",value:function(e){console.log("processResponseError:",e)}}]),t}(c.a.Component)},513:function(e,t,a){"use strict";a(208);var n=a(135),l=a.n(n),r=(a(492),a(493)),s=a.n(r),i=a(19),o=a(20),c=a(22),u=a(18),m=a(21),h=a(1),d=a.n(h),f=a(453),b=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).reqData={reqParams:{pageNum:1,pageSize:10},delUrl:"",rowKey:"id"},a.auto=e.auto,Object.assign(a.state,{dataList:[],columns:[],total:0,current:1,pageSize:10}),a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"setPageNum",value:function(e){this.reqData.reqParams.pageNum=e}},{key:"requestListPageData",value:function(e,t,a){e&&this.setPageNum(e),t&&(this.reqData.reqParams.pageSize=t),this.requestListData(a)}},{key:"requestQueryData",value:function(e){this.setPageNum(1),this.requestListData(e)}},{key:"requestListData",value:function(e){var t=Object.assign({},this.reqData.reqParams);e&&Object.assign(t,e),console.log("params:",t),this.requestData(t)}},{key:"processResponseData",value:function(e){Object(f.a)(Object(u.a)(t.prototype),"processResponseData",this).call(this,e);var a=this.processCustomResultData(e),n={};a.list&&(n.dataList=a.list),a.columns&&(n.columns=a.columns),a.total&&(n.total=a.total),a.pageSize&&(n.pageSize=a.pageSize),a.pageNum&&(n.current=a.pageNum),a.rowKey&&(this.reqData.rowKey=a.rowKey),this.setState(n)}},{key:"processCustomResultData",value:function(e){return e}},{key:"componentDidMount",value:function(){!0===this.auto&&this.requestListData(),this.props.onRef&&this.props.onRef(this)}}]),t}(a(455).a);a.d(t,"a",function(){return p});var p=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state.columns=e.columns,a.state.dataList=[],a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"onShowSizeChange",value:function(e,t){console.log({current:e,pageSize:t}),this.requestListPageData(e,t)}},{key:"onChange",value:function(e){console.log("Page: ",e),this.requestListPageData(e)}},{key:"render",value:function(){return d.a.createElement("div",null,d.a.createElement(l.a,{spinning:this.state.loading,tip:"\u6570\u636e\u52a0\u8f7d\u4e2d..."},d.a.createElement(s.a,{columns:this.state.columns,dataSource:this.state.dataList,rowKey:this.reqData.rowKey,pagination:{pageSizeOptions:["10","20","30"],showSizeChanger:!0,onChange:this.onChange.bind(this),onShowSizeChange:this.onShowSizeChange.bind(this),current:this.state.current,total:this.state.total,pageSize:this.state.pageSize}})))}}]),t}(b)},904:function(e,t,a){"use strict";a.r(t);a(811);var n,l,r,s=a(820),i=a.n(s),o=(a(212),a(105)),c=a.n(o),u=a(19),m=a(20),h=a(22),d=a(18),f=a(21),b=(a(213),a(67)),p=a.n(b),g=(a(208),a(135)),E=a.n(g),O=(a(817),a(819)),v=a.n(O),y=(a(97),a(81)),j=a.n(y),k=(a(463),a(467)),C=a.n(k),q=a(1),D=a.n(q),S=a(513),w=a(453),R=a(455),F=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(h.a)(this,Object(d.a)(t).call(this,e))).tableConfig.tableListElement=S.a,a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"handleDeleteData",value:function(e){var t=this;C.a.confirm({title:"",content:"\u786e\u8ba4\u8981\u5220\u9664\u6570\u636e",okText:"\u662f",okType:"danger",cancelText:"\u5426",onOk:function(){t.requestDeleteData(e)}})}},{key:"getOperateColumsElement",value:function(){var e=this;return[{title:"Action",key:"action",render:function(t,a){return D.a.createElement("div",null,D.a.createElement(j.a,{type:"link",onClick:e.handleEditData.bind(e,a)},D.a.createElement("u",null,"\u7f16\u8f91")),D.a.createElement(v.a,{type:"vertical"}),D.a.createElement(j.a,{type:"link",onClick:e.handleDeleteData.bind(e,a.id)},D.a.createElement("u",null,"\u5220\u9664")))}}]}},{key:"render",value:function(){return D.a.createElement("div",null,D.a.createElement(E.a,{spinning:this.state.loading},D.a.createElement("div",{className:"tableQueryPanel"},this.getAddFormElement(),this.getEditFormElement(),this.getQueryFormElement()),this.getTableListElement()))}}]),t}(function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(h.a)(this,Object(d.a)(t).call(this,e))).tableConfig={url:"",auto:!1,delUrl:"",addUrl:"",editUrl:"",addFormElement:null,editFormElement:null,queryFormElement:null,tableListElement:null,headerColumnsElement:[]},a.onRefTableList=function(e){a.tableListObj=e},a.onRefQueryForm=function(e){a.queryFormObj=e},a.onRefEditForm=function(e){a.editFormObj=e},a.onRefAddForm=function(e){a.addFormObj=e},a.handleAddSucess=function(){a.refreshTableList()},a.handleEditData=function(e){a.editFormObj.handleOpenShow(e)},Object.assign(a.state,{addControl:{visible:!1},edtControl:{visible:!1}}),a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"queryTableList",value:function(e){this.tableListObj.requestQueryData(e)}},{key:"refreshTableList",value:function(){this.tableListObj.requestRefresh()}},{key:"getAddFormElement",value:function(){if(null!=this.tableConfig.addFormElement)return D.a.createElement(this.tableConfig.addFormElement,{onRef:this.onRefAddForm,event:{endEvent:this.handleAddSucess.bind(this)},url:this.tableConfig.addUrl})}},{key:"getEditFormElement",value:function(){return D.a.createElement(this.tableConfig.editFormElement,{onRef:this.onRefEditForm,event:{endEvent:this.handleAddSucess.bind(this)},url:this.tableConfig.editUrl})}},{key:"getQueryFormElement",value:function(){return D.a.createElement(this.tableConfig.queryFormElement,{onRef:this.onRefQueryForm,event:{queryEvent:this.queryTableList.bind(this)}})}},{key:"getTableListElement",value:function(){var e;return e=[].concat(this.tableConfig.headerColumnsElement,this.getOperateColumsElement()),D.a.createElement(this.tableConfig.tableListElement,{onRef:this.onRefTableList,url:this.tableConfig.url,auto:this.tableConfig.auto,columns:e},null)}},{key:"getOperateColumsElement",value:function(){}},{key:"handleDeleteData",value:function(e){}},{key:"requestDeleteData",value:function(e){console.log("requestDeleteData:"+e);var a={id:e};Object(w.a)(Object(d.a)(t.prototype),"requestDataExtendPost",this).call(this,this.tableConfig.delUrl,a)}},{key:"processResponseData",value:function(e){this.refreshTableList()}}]),t}(R.a)),L=a(136),P=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(h.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).itemContentElement=function(){},a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.props.onRef&&this.props.onRef(this)}},{key:"getRequestParam",value:function(e){return{}}}]),t}(R.a),x=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(h.a)(this,Object(d.a)(t).call(this,e))).boxConfig={title:""},a.showElement=null,a.handleOpenShow=function(e){a.setState({showFlag:!0})},a.handleCloseShow=function(){Object(w.a)(Object(d.a)(t.prototype),"cancelRequest",Object(L.a)(a)).call(Object(L.a)(a)),a.setState({showFlag:!1}),Object(w.a)(Object(d.a)(t.prototype),"showLoadEnd",Object(L.a)(a)).call(Object(L.a)(a))},a.handleSubmit=function(e){e.preventDefault(),a.props.form.validateFields(function(e,t){if(!e){console.log("Received values of form: ",t);var n=a.getRequestParam(t);console.log(n),a.requestDataExtendPost(a.props.url,n)}})},a.handleEnd=function(){a.props.event.endEvent()},a.state.showFlag=!1,a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"processResponseData",value:function(e){console.log("processResponseData:",e),this.handleEnd(),this.setState({showFlag:!1})}},{key:"render",value:function(){var e=this.boxConfig;return D.a.createElement("span",{className:"tableform"},this.showElement,D.a.createElement(C.a,{title:e.title,visible:this.state.showFlag,onCancel:this.handleCloseShow,footer:null},D.a.createElement(E.a,{spinning:this.state.loading},D.a.createElement(p.a,Object.assign({},{labelCol:{xs:{span:22},sm:{span:4}},wrapperCol:{xs:{span:22},sm:{span:16}}},{onSubmit:this.handleSubmit}),this.itemContentElement(),D.a.createElement(p.a.Item,{wrapperCol:{xs:{span:24,offset:0},sm:{span:16,offset:8}}},D.a.createElement(j.a,{type:"primary",onClick:this.handleSubmit},"\u63d0\u4ea4"),D.a.createElement(j.a,{onClick:this.handleCloseShow},"\u5173\u95ed"))))))}}]),t}(P),A=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(h.a)(this,Object(d.a)(t).call(this,e))).boxConfig.title="\u589e\u52a0",a.showElement=D.a.createElement("span",{className:"tableform"},D.a.createElement(p.a,{layout:"inline"},D.a.createElement(p.a.Item,null,D.a.createElement(j.a,{onClick:a.handleOpenShow},"\u589e\u52a0")))),a}return Object(f.a)(t,e),t}(x),I=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(h.a)(this,Object(d.a)(t).call(this,e))).boxConfig.title="\u4fee\u6539",a}return Object(f.a)(t,e),t}(x),T=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(h.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).handleSubmit=function(e){e.preventDefault(),a.props.form.validateFields(function(e,t){if(!e){console.log("Received values of form: ",t);var n=a.getRequestParam(t);a.props.event.queryEvent(n)}})},a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return D.a.createElement("span",{className:"tableform queryform"},D.a.createElement(p.a,{layout:"inline",onSubmit:this.handleSubmit},this.itemContentElement(),D.a.createElement(p.a.Item,null,D.a.createElement(j.a,{onClick:this.handleSubmit},"\u67e5\u8be2"))))}}]),t}(P),U=p.a.create()(n=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(h.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).itemContentElement=function(){var e=a.props.form.getFieldDecorator;return D.a.createElement("span",null,D.a.createElement(p.a.Item,{label:"Name"},e("name",{initialValue:"demo"})(D.a.createElement(c.a,null))),D.a.createElement(p.a.Item,{label:"Addr"},e("addr",{})(D.a.createElement(c.a,null))),D.a.createElement(p.a.Item,{label:"Age"},e("age",{})(D.a.createElement(c.a,null))),D.a.createElement(p.a.Item,{label:"Birth"},e("birth",{rules:[{type:"object",false:!0,message:"Please select time!"}]})(D.a.createElement(i.a,null))),D.a.createElement(p.a.Item,{label:"Sex"},e("sex",{})(D.a.createElement(c.a,null))))},a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"getRequestParam",value:function(e){return{name:e.name}}}]),t}(A))||n,z=p.a.create()(l=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(h.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).itemContentElement=function(){var e=a.props.form.getFieldDecorator;return D.a.createElement("span",null,D.a.createElement(p.a.Item,{label:"Name"},e("name",{initialValue:"demo"})(D.a.createElement(c.a,null))),D.a.createElement(p.a.Item,{label:"Addr"},e("addr",{})(D.a.createElement(c.a,null))),D.a.createElement(p.a.Item,{label:"Age"},e("age",{})(D.a.createElement(c.a,null))),D.a.createElement(p.a.Item,{label:"Birth"},e("birth",{rules:[{type:"object",false:!0,message:"Please select time!"}]})(D.a.createElement(i.a,null))),D.a.createElement(p.a.Item,{label:"Sex"},e("sex",{})(D.a.createElement(c.a,null))))},a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"getRequestParam",value:function(e){return{name:e.name}}}]),t}(I))||l,N=p.a.create()(r=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(h.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).itemContentElement=function(){var e=a.props.form.getFieldDecorator;return D.a.createElement("span",null,D.a.createElement(p.a.Item,{label:"name"},e("name",{initialValue:""})(D.a.createElement(c.a,{placeholder:"\u59d3\u540d",allowClear:!0}))))},a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"getRequestParam",value:function(e){return{name:e.name}}}]),t}(T))||r,Q=function(e){function t(e){var a;return Object(u.a)(this,t),a=Object(h.a)(this,Object(d.a)(t).call(this,e)),Object.assign(a.tableConfig,{url:"/_mockjs/user/listpage",auto:!0,delUrl:"/_mockjs/user/delete",addUrl:"/_mockjs/user/add",editUrl:"/_mockjs/user/edit",addFormElement:U,editFormElement:z,queryFormElement:N,headerColumnsElement:a.getHeaderColumnsElement()}),a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"getHeaderColumnsElement",value:function(){return[{title:"\u5e8f\u53f7",width:80,key:"id",render:function(e,t,a){return" ".concat(a+1)}},{title:"Name",dataIndex:"name",key:"name",render:function(e){return D.a.createElement("span",null,e)}},{title:"Age",dataIndex:"age",key:"age"},{title:"Addr",dataIndex:"addr",key:"addr"},{title:"Birth",dataIndex:"birth",key:"birth"},{title:"Sex",dataIndex:"sex",key:"sex"}]}}]),t}(F);t.default=Q}}]);